<!DOCTYPE html>
<html>
  <head>
	<script language="javascript" src="../../bower_components/webcomponentsjs/webcomponents.js"></script>
	<!-- <link rel="import" href="../../build/strand.html" /> -->
	
	<link rel="import" href="../mm-dropdown/mm-dropdown.html" />
	<link rel="import" href="../mm-input/mm-input.html" />
	<link rel="import" href="../mm-inline-box/mm-inline-box.html" />
	<link rel="import" href="../mm-header/mm-header.html" />
	<link rel="import" href="../mm-footer/mm-footer.html" />
	<link rel="import" href="../mm-button/mm-button.html" />

	<link rel="import" href="mm-form.html" />
	<style type="text/css">
		body, html {
			height: 100%;
			min-height: 100%;
		}

		body {  
			margin:0;
			padding:0;
			background: #eee;
		}

		.col {
			box-sizing: border-box;
			padding: 10px 0 10px 10px;
		}

		mm-form[unresolved] {
			display: none;
		}
	</style>
  </head>
  <body>

	<mm-form id="testForm" unresolved>
		
		<div class="col" span="1">
			<mm-header size="medium">Type a Number</mm-header>
			<mm-input form-id="input"
				fitparent 
				validation="int|empty"
				placeholder="Type a Number"
				error-target="#inputError"></mm-input>
			<mm-inline-box id="inputError" type="error" fitparent>
				You need to type a number
			</mm-inline-box>
		</div>

		<div class="col" span="1">
			<mm-header size="medium">Select an Item</mm-header>
			<mm-dropdown form-id="dropdown"
				fitparent 
				placeholder="Select an Item" 
				validation="empty"
				error-target="#dropdownError">
				<mm-list-item>List Item 1</mm-list-item>
				<mm-list-item>List Item 2</mm-list-item>
				<mm-list-item>List Item 3</mm-list-item>
				<mm-list-item>List Item 4</mm-list-item>
			</mm-dropdown>
			<mm-inline-box id="dropdownError" type="error" fitparent>
				You need to select an item
			</mm-inline-box>
		</div>

		<!-- 
		<div class="col" span="1">
			<mm-header size="medium">Header</mm-header>
			<mm-input fitparent placeholder="Type Here Bro"></mm-input>
		</div>
		<div class="col" span="1">
			<mm-header size="medium">Header</mm-header>
			<mm-input fitparent placeholder="Type Here Bro"></mm-input>
		</div>
		-->

		<mm-footer id="testFormFooter" unresolved fitparent semi-transparent>
			<mm-button id="submitBtn">
				<label>Save</label>
			</mm-button>
		</mm-footer>

	</mm-form>

	<script>
		var testForm, 
			submitBtn,
			testFormFooter;

		window.addEventListener('WebComponentsReady', function(e) {
			
			testForm = Polymer.dom(document).querySelector('#testForm');
			submitBtn = Polymer.dom(document).querySelector('#submitBtn');
			testFormFooter = Polymer.dom(document).querySelector('#testFormFooter');

			submitBtn.addEventListener('click', submitForm);

			// TODO: test out in a view - think about architecture
			testForm.addEventListener('form-submit', function(e) {
				console.log(e.detail);
				if (!e.detail.isValid) {
					testFormFooter.type = 'error';
					testFormFooter.message = 'This form contains errors';
					testFormFooter.showMessage();
				} else {
					testFormFooter.type = 'success';
					testFormFooter.message = 'This form has been submitted';
					testFormFooter.showMessage();
				}
			});
		});

		function submitForm(e) {
			e.preventDefault();
			testForm.submitForm();
		}

	</script>

  </body>
</html>